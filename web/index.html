<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Haystack-Lite 文件管理</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Haystack-Lite 文件管理系统</h1>
            <div class="stats">
                <span id="totalFiles">文件总数: 0</span>
                <span id="totalSize">总大小: 0 B</span>
            </div>
        </header>

        <div class="upload-section">
            <div class="upload-box" id="uploadBox">
                <input type="file" id="fileInput" multiple hidden>
                <div class="upload-icon">⬆️</div>
                <p>点击或拖拽文件到此处上传</p>
                <button class="btn btn-primary" onclick="document.getElementById('fileInput').click()">选择文件</button>
            </div>
            <div id="uploadProgress" class="upload-progress" style="display: none;">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <span id="progressText">上传中...</span>
            </div>
        </div>

        <div class="toolbar">
            <input type="text" id="searchInput" placeholder="搜索文件名..." class="search-input">
            <button class="btn btn-secondary" onclick="refreshFiles()">刷新</button>
            <button class="btn btn-danger" onclick="deleteSelected()" id="deleteBtn" disabled>删除选中</button>
        </div>

        <div class="file-list">
            <table id="fileTable">
                <thead>
                    <tr>
                        <th width="40"><input type="checkbox" id="selectAll" onchange="toggleSelectAll()"></th>
                        <th width="80">ID</th>
                        <th>文件名</th>
                        <th width="120">类型</th>
                        <th width="100">大小</th>
                        <th width="180">创建时间</th>
                        <th width="200">操作</th>
                    </tr>
                </thead>
                <tbody id="fileTableBody">
                    <tr>
                        <td colspan="7" class="loading">加载中...</td>
                    </tr>
                </tbody>
            </table>
            
            <div class="pagination" id="pagination" style="display: none;">
                <button class="btn btn-secondary btn-sm" id="prevPage" onclick="changePage(-1)">上一页</button>
                <span id="pageInfo">第 1 页 / 共 1 页</span>
                <button class="btn btn-secondary btn-sm" id="nextPage" onclick="changePage(1)">下一页</button>
            </div>
        </div>
    </div>

    <div id="previewModal" class="modal" onclick="closePreview()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close" onclick="closePreview()">&times;</span>
            <div id="previewContent"></div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>
